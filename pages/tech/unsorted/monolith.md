# Микросервисный монолит

## Дерево текущей реальности

```mermaid
graph TD
    A[Микросервисный монолит] --> B[Цепочное взаимодействие]
    A --> C[Отсутствие устойчивости к отказам]
    A --> D[Ненадежные интеграции]
    B --> E[Долгое выполнение действий]
    B --> F[Отсутствие асинхронных коммуникаций]
    C --> G[Любой сервис может обрушить всю систему]
    D --> H[При ошибке пользователю нужно повторять действие]
    F --> I[Для получения данных требуется синхронный запрос]
    E --> J[Окно программы открывается медленно]
    I --> J
    H --> J
```

### Пояснение:

- **Микросервисный монолит (A)** является корневым элементом, который порождает множество других нежелательных явлений.
- **Цепочное взаимодействие (B)** и **Отсутствие устойчивости к отказам (C)** являются прямыми следствиями монолитности.
- **Ненадежные интеграции (D)** также являются следствием монолитности.
- **Долгое выполнение действий (E)** и **Отсутствие асинхронных коммуникаций (F)** являются следствиями цепочного взаимодействия.
- **Любой сервис может обрушить всю систему (G)** является следствием отсутствия устойчивости к отказам.
- **При ошибке пользователю нужно повторять действие (H)** является следствием ненадежных интеграций.
- **Для получения данных требуется синхронный запрос (I)** является следствием отсутствия асинхронных коммуникаций.
- **Окно программы открывается медленно (J)** является следствием долгого выполнения действий, синхронных запросов и необходимости повторения действий при ошибках.

Это дерево текущей реальности помогает визуализировать взаимосвязи между нежелательными явлениями и определить ключевые области для улучшения системы.

### Подробно
Теория Элияху Голдратта, известная как "Теория Ограничений" (Theory of Constraints, TOC), фокусируется на идентификации и устранении бутылочных горлышек в системах для улучшения общего производительности. В контексте микросервисной архитектуры, анализ нежелательных явлений (НЖЯ) позволяет идентифицировать ключевые ограничения и построить связи между ними для оптимизации системы.

### Анализ НЖЯ по теории Голдратта:

1. **Система является микросервисным монолитом.**
   - **Ограничение:** Тесная связаность модулей приводит к сложности в управлении и уязвимости системы.
   - **TOC:** Это основной бутылочное горлышко, так как монолитная структура препятствует масштабируемости и гибкости.

2. **Взаимодействие сервисов происходит по цепочке.**
   - **Ограничение:** Последовательные вызовы увеличивают задержки и снижают надежность.
   - **TOC:** Это вторичное ограничение, которое возникает из-за монолитной структуры, где сервисы не могут работать независимо.

3. **Отказ или замедление любого сервиса приводит к сбою всей системы.**
   - **Ограничение:** Отсутствие устойчивости к отказам.
   - **TOC:** Это результат монолитной структуры и цепочного взаимодействия, которое не позволяет системе продолжать работать при сбоях в отдельных компонентах.

4. **Интеграции ненадежны.**
   - **Ограничение:** Ненадежные интеграции приводят к ошибкам и сбоям.
   - **TOC:** Это следствие монолитной структуры и цепочного взаимодействия, где любая точка сбоя может повлиять на всю систему.

5. **Долгое выполнение действий в системе.**
   - **Ограничение:** Повышение задержек и снижение удовлетворенности пользователей.
   - **TOC:** Это результат цепочного взаимодействия и отсутствия асинхронных коммуникаций, которые могут уменьшить задержки.

6. **При ошибке пользователю нужно повторять действие.**
   - **Ограничение:** Дополнительные трудозатраты для пользователей из-за ошибок в системе.
   - **TOC:** Это следствие ненадежных интеграций и долгого выполнения действий, которые не позволяют системе автоматически обрабатывать ошибки.

7. **Любой сервис может обрушить всю систему.**
   - **Ограничение:** Отсутствие изоляции сервисов.
   - **TOC:** Это результат монолитной структуры и цепочного взаимодействия, которые не позволяют изолировать сбои в отдельных компонентах.

8. **Отсутствие асинхронных коммуникаций.**
   - **Ограничение:** Низкая эффективность обмена данными между сервисами.
   - **TOC:** Это вторичное ограничение, которое усугубляет проблему цепочного взаимодействия и долгого выполнения действий.

9. **Для получения данных требуется синхронный запрос.**
   - **Ограничение:** Частые запросы увеличивают задержки и перегружают систему.
   - **TOC:** Это следствие отсутствия асинхронных коммуникаций и монолитной структуры, которая не позволяет оптимизировать обмен данными.

10. **Окно программы открывается медленно.**
    - **Ограничение:** Низкая производительность и негативное восприятие системы пользователями.
    - **TOC:** Это результат долгого выполнения действий и цепочного взаимодействия, которые замедляют работу системы.

### Связи между НЖЯ:

1. **Микросервисный монолит** является основным бутылочным горлышком, который приводит к:
   - **Цепочному взаимодействию** (НЖЯ 2), которое увеличивает задержки и снижает надежность.
   - **Отсутствию устойчивости к отказам** (НЖЯ 3), так как любой сервис может обрушить всю систему (НЖЯ 7).
   - **Ненадежным интеграциям** (НЖЯ 4), которые приводят к ошибкам и сбоям.

2. **Цепочное взаимодействие** (НЖЯ 2) приводит к:
   - **Долгому выполнению действий** (НЖЯ 5), так как каждая операция зависит от предыдущей.
   - **Отсутствию асинхронных коммуникаций** (НЖЯ 8), которые могли бы улучшить эффективность обмена данными.

3. **Отсутствие асинхронных коммуникаций** (НЖЯ 8) приводит к:
   - **Требованию синхронных запросов** (НЖЯ 9), которые увеличивают задержки и перегружают систему.

4. **Долгое выполнение действий** (НЖЯ 5) и **отсутствие асинхронных коммуникаций** (НЖЯ 8) приводят к:
   - **Медленному открытию окна программы** (НЖЯ 10), что ухудшает пользовательский опыт.

5. **Ненадежные интеграции** (НЖЯ 4) и **долгое выполнение действий** (НЖЯ 5) приводят к:
   - **Требованию повторения действия пользователем при ошибке** (НЖЯ 6), что увеличивает трудозатраты.

### Заключение:

Теория Голдратта помогает идентифицировать ключевые ограничения в системе и построить связи между ними. В данном случае, основным бутылочным горлышком является **микросервисный монолит** (НЖЯ 1), который приводит к цепочному взаимодействию, ненадежным интеграциям, длительному выполнению действий и другим нежелательным явлениям. Для улучшения системы необходимо сначала устранить монолитную структуру, обеспечив независимость и отказоустойчивость между сервисами, а затем продолжить устранение других ограничений, таких как синхронная коммуникация и надежная интеграция.
