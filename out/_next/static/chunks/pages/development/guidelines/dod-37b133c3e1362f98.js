(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{244:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/development/guidelines/dod",function(){return a(4590)}])},4590:function(e,n,a){"use strict";a.r(n),a.d(n,{__toc:function(){return o}});var t=a(5893),i=a(2673),s=a(3058),r=a(9812);a(6834);var d=a(2643);let o=[{depth:2,value:"DoD (Definition of Done)",id:"dod-definition-of-done"},{depth:2,value:"Именования переменных",id:"именования-переменных"},{depth:2,value:"Обратить внимание",id:"обратить-внимание"},{depth:2,value:"Особенности вычислений с плавающей точкой",id:"особенности-вычислений-с-плавающей-точкой"},{depth:2,value:"Отладка и логирование",id:"отладка-и-логирование"},{depth:2,value:"Отправка сообщений об ошибках на почту",id:"отправка-сообщений-об-ошибках-на-почту"}];function _createMdxContent(e){let n=Object.assign({h1:"h1",h2:"h2",p:"p",br:"br",a:"a",ol:"ol",li:"li",pre:"pre",code:"code",span:"span"},(0,d.a)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{children:"Требования к коду"}),"\n",(0,t.jsx)(n.h2,{id:"dod-definition-of-done",children:"DoD (Definition of Done)"}),"\n",(0,t.jsxs)(n.p,{children:["Критерии готовности - проверяются по каждой задаче командой до релиза",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"https://habr.com/ru/post/684272/",children:"Статья о DoD"})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Код хорошо написан. То есть команда не чувствует необходимости немедленно проводить рефакторинг или переписывать его."}),"\n",(0,t.jsx)(n.li,{children:"Код отформатирован по eslint"}),"\n",(0,t.jsx)(n.li,{children:"К коду написаны комментарии (ответственность модуля, основные моменты логики)"}),"\n",(0,t.jsx)(n.li,{children:"В логах нет вывода перс данных (и вообще нет лишних console.log)"}),"\n",(0,t.jsx)(n.li,{children:"Код поставляется с автоматическими тестами на всех соответствующих уровнях."}),"\n",(0,t.jsx)(n.li,{children:"Код работает в seamonkey 2.35 - только для проектов БыстроБанка"}),"\n",(0,t.jsx)(n.li,{children:"Код проверен, прошел автотесты."}),"\n",(0,t.jsx)(n.li,{children:"Код-ревью выполнен"}),"\n",(0,t.jsx)(n.li,{children:"Необходимые переменные окружения добавлены в web.xml, .env.example"}),"\n",(0,t.jsx)(n.li,{children:"На внешние сервисы есть заглушки или api-тестовая среда"}),"\n",(0,t.jsx)(n.li,{children:"Обновления метаданных базы данных оформлены в миграции"}),"\n",(0,t.jsx)(n.li,{children:"Ручное тестирование прошло успешно"}),"\n",(0,t.jsx)(n.li,{children:"Проверка на уязвимости прошла успешно"}),"\n",(0,t.jsx)(n.li,{children:"Реализованная функция была описана в документации для конечного пользователя."}),"\n",(0,t.jsx)(n.li,{children:"При релизе в package.json обновлена версия приложения"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"именования-переменных",children:"Именования переменных"}),"\n",(0,t.jsxs)(n.p,{children:["Называть в соответствии с содержимым",(0,t.jsx)(n.br,{}),"\nДля полей модели используется camelCase"]}),"\n",(0,t.jsx)(n.h2,{id:"обратить-внимание",children:"Обратить внимание"}),"\n",(0,t.jsx)(n.p,{children:"Вместо +params.value лучше явное преобразование parseInt(params.value)"}),"\n",(0,t.jsx)(n.p,{children:"Не использовать var, let"}),"\n",(0,t.jsx)(n.h2,{id:"особенности-вычислений-с-плавающей-точкой",children:"Особенности вычислений с плавающей точкой"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"2.51 + .01;                   // => 2.5199999999999996"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"currency(2.51).add(.01);      // => 2.52"})})]})}),"\n",(0,t.jsx)(n.p,{children:"используйте"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"import currency from 'currency.js';"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'currency(7.89).add(c1).add(c2); // => "13.68"'})})]})}),"\n",(0,t.jsxs)(n.p,{children:["иначе вылазят такие казусы",(0,t.jsx)(n.br,{}),"\nНазначение платежа: Пополнение лицевого счета 116 НДС не облагается. Остаток на счете: 3386 руб.",(0,t.jsx)(n.br,{}),"\nРекомендуемая сумма пополнения: 139042.83000000002 руб"]}),"\n",(0,t.jsx)(n.h2,{id:"отладка-и-логирование",children:"Отладка и логирование"}),"\n",(0,t.jsxs)(n.p,{children:["В логах не допускается вывод персональных данных клиентов (даже в режиме debug)",(0,t.jsx)(n.br,{}),"\nДля отладки использовать debug вместо console.log();"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"import createDebug from 'debug';"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"const debug = createDebug('icompany-XXX');"})})]})}),"\n",(0,t.jsx)(n.p,{children:"в коде"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"text","data-theme":"default",children:(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debug(....);"})})})}),"\n",(0,t.jsxs)(n.p,{children:["Пример: ",(0,t.jsx)(n.a,{href:"https://github.com/iconicompany/icompany/blob/master/src/Application.mjs",children:"https://github.com/iconicompany/icompany/blob/master/src/Application.mjs"})]}),"\n",(0,t.jsx)(n.p,{children:"тогда можно на сервере включать и выключать"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DEBUG=icompany-*"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DEBUG=icompany-messages"})})]})}),"\n",(0,t.jsx)(n.h2,{id:"отправка-сообщений-об-ошибках-на-почту",children:"Отправка сообщений об ошибках на почту"}),"\n",(0,t.jsx)(n.p,{children:"Повесить errormailer на обработчик ошибок"}),"\n",(0,t.jsx)(n.p,{children:"в /libs/middlewares/index.mjs"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"import { notify } from '@ilb/mailer/src/errormailer';"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"export const onError = (err, req, res) => {"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"notify(err).catch(console.log);"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,t.jsx)(n.p,{children:"И админам прописать SERVER_ADMIN с почтами в .pm2/processes.json:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"закомментировать в .env:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"text","data-theme":"default",children:(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"#apps.strizhinvest.server_admin  "})})})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"добавить или изменить запись в processes.json:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"env":  '})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"SERVER_ADMIN": ""  '})})]})})]})}let l={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.a)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/development/guidelines/dod.md",route:"/development/guidelines/dod",timestamp:1682665668e3,pageMap:[{kind:"Meta",data:{index:"Introduction",development:"Разработка",administration:"Servers, databases, clusters","project-catalogue":"Каталог проектов",onboarding:"Onboarding for DEVELOPER","project-managment":"Управление проектами",contact:{title:"Contact ↗",type:"page",href:"https://iconicompany.com/",newWindow:!0}}},{kind:"Folder",name:"administration",route:"/administration",children:[{kind:"Meta",data:{server:"Как создать и настроить сервер на Ubuntu",k3s:"Установка k3s",ldap:"Ldap",putting:"Putting",werf:"Werf"}},{kind:"MdxPage",name:"k3s",route:"/administration/k3s"},{kind:"MdxPage",name:"ldap",route:"/administration/ldap"},{kind:"MdxPage",name:"putting",route:"/administration/putting"},{kind:"MdxPage",name:"server",route:"/administration/server"},{kind:"MdxPage",name:"werf",route:"/administration/werf"}]},{kind:"Folder",name:"development",route:"/development",children:[{kind:"Meta",data:{guidelines:"Гайдлайны",nodejs:"Nodejs docs",telegram:"Telegram"}},{kind:"Folder",name:"guidelines",route:"/development/guidelines",children:[{kind:"Meta",data:{dod:"Definition of Done",recommendations:"Recommendations"}},{kind:"MdxPage",name:"dod",route:"/development/guidelines/dod"},{kind:"MdxPage",name:"recommendations",route:"/development/guidelines/recommendations"}]},{kind:"Folder",name:"nodejs",route:"/development/nodejs",children:[{kind:"Meta",data:{workstation:"How to setup Nodejs developer workstation",packages:"Snippets for packages"}},{kind:"MdxPage",name:"packages",route:"/development/nodejs/packages"},{kind:"MdxPage",name:"workstation",route:"/development/nodejs/workstation"}]},{kind:"MdxPage",name:"telegram",route:"/development/telegram"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"onboarding",route:"/onboarding"},{kind:"Folder",name:"project-catalogue",route:"/project-catalogue",children:[{kind:"Meta",data:{bystrobank:"БыстроБанк"}},{kind:"Folder",name:"bystrobank",route:"/project-catalogue/bystrobank",children:[{kind:"Meta",data:{guidelines:"Гайдлайны",stubs:"Написание заглушек"}},{kind:"MdxPage",name:"guidelines",route:"/project-catalogue/bystrobank/guidelines"},{kind:"MdxPage",name:"stubs",route:"/project-catalogue/bystrobank/stubs"}]}]},{kind:"Folder",name:"project-managment",route:"/project-managment",children:[{kind:"Folder",name:"NUPP_p3express",route:"/project-managment/NUPP_p3express",children:[{kind:"MdxPage",name:"NUPP-principles",route:"/project-managment/NUPP_p3express/NUPP-principles"},{kind:"Meta",data:{"NUPP-principles":"Nupp Principles"}}]},{kind:"MdxPage",name:"PMBOK6",route:"/project-managment/PMBOK6"},{kind:"Meta",data:{onboarding_pm:"База",work:"Управление проектом",issue:"Постановка issue",escalation:"Эскалация на проекте",requirements:"Оформление задач и требований",integration:"Управление интеграцией",developmentprocess:"Developmentprocess",PMBOK6:"Pmbok6",productmanagement:"Productmanagement"}},{kind:"MdxPage",name:"developmentprocess",route:"/project-managment/developmentprocess"},{kind:"MdxPage",name:"escalation",route:"/project-managment/escalation"},{kind:"MdxPage",name:"integration",route:"/project-managment/integration"},{kind:"MdxPage",name:"issue",route:"/project-managment/issue"},{kind:"MdxPage",name:"onboarding_pm",route:"/project-managment/onboarding_pm"},{kind:"MdxPage",name:"productmanagement",route:"/project-managment/productmanagement"},{kind:"MdxPage",name:"work",route:"/project-managment/work"}]}],flexsearch:{codeblocks:!0},title:"Требования к коду",headings:o},pageNextRoute:"/development/guidelines/dod",nextraLayout:s.ZP,themeConfig:r.Z};n.default=(0,i.j)(l)},9812:function(e,n,a){"use strict";var t=a(5893);a(7294);let i={logo:(0,t.jsx)("span",{children:"Iconicompany docs"}),project:{link:"https://github.com/iconicompany/idocs"},chat:{link:"https://t.me/iconicompany"},docsRepositoryBase:"https://github.com/iconicompany/idocs/blob/main",footer:{text:"Iconicompany docs"}};n.Z=i}},function(e){e.O(0,[774,270,888,179],function(){return e(e.s=244)}),_N_E=e.O()}]);